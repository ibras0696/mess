# üóíÔ∏è BACKEND.md ‚Äî –∂—É—Ä–Ω–∞–ª –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ backend (–ê–≥–µ–Ω—Ç A)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –∫–∞–∂–¥—ã–π –±—ç–∫–µ–Ω–¥-–∞–ø–¥–µ–π—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º. –ù–µ —É–¥–∞–ª—è–π –∏—Å—Ç–æ—Ä–∏—é, –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –¥–æ–±–∞–≤–ª—è–π —Å–≤–µ—Ä—Ö—É.

## –ü—Ä–∞–≤–∏–ª–∞ –≤–µ–¥–µ–Ω–∏—è
- –°–ª–µ–¥—É–µ–º ARCHITECTURE.md –∏ API_CONTRACT.md.
- –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API —Å–Ω–∞—á–∞–ª–∞ –æ—Ç—Ä–∞–∂–∞–µ–º –≤ API_CONTRACT.md, –ø–æ—Ç–æ–º —Ä–µ–∞–ª–∏–∑—É–µ–º.
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π API —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º openapi.json.
- –£–∫–∞–∑—ã–≤–∞–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic –∏ –ø—Ä–∞–≤–∫–∏ docker-compose/Makefile, –µ—Å–ª–∏ –±—ã–ª–∏.

## –®–∞–±–ª–æ–Ω –∑–∞–ø–∏—Å–∏ (–∫–æ–ø–∏—Ä—É–π –∏ –∑–∞–ø–æ–ª–Ω—è–π)
```
## YYYY-MM-DD ‚Äî –°–ø—Ä–∏–Ω—Ç N (–∫—Ä–∞—Ç–∫–æ –æ —Ñ–æ–∫—É—Å–µ)
- –°–¥–µ–ª–∞–Ω–æ:
  - ...
- –í —Ä–∞–±–æ—Ç–µ:
  - ...
- –ë–ª–æ–∫–µ—Ä—ã/—Ä–∏—Å–∫–∏:
  - ...
- –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
  - ...
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
  - PR: <—Å—Å—ã–ª–∫–∞ –∏–ª–∏ "-" >
  - API_CONTRACT: –æ–±–Ω–æ–≤–ª—ë–Ω? (–¥–∞/–Ω–µ—Ç)
  - openapi.json: –æ–±–Ω–æ–≤–ª—ë–Ω? (–¥–∞/–Ω–µ—Ç)
  - Alembic –º–∏–≥—Ä–∞—Ü–∏–∏: <–∏–º—è —Ä–µ–≤–∏–∑–∏–∏/–Ω–µ—Ç>
  - docker-compose/Makefile: <—á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å/–Ω–µ—Ç>
```

## –ñ—É—Ä–Ω–∞–ª
*(–Ω–∏–∂–µ –¥–æ–±–∞–≤–ª—è–π –∑–∞–ø–∏—Å–∏ –ø–æ —à–∞–±–ª–æ–Ω—É ‚Äî —Å–≤–µ–∂–∏–µ –≤—ã—à–µ)*

## 2025-12-03 ‚Äî –°–ø—Ä–∏–Ω—Ç 2 (Auth)
- –°–¥–µ–ª–∞–Ω–æ:
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω User (SQLAlchemy) + —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å—Ö–µ–º—ã UserCreate/UserRead, JWT-–ø–æ—Ç–æ–∫ (access/refresh).
  - –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã: POST /api/auth/register, /login, /refresh; GET /api/users/me, /api/users/{id}; auth dependency HTTP Bearer.
  - –î–æ–±–∞–≤–ª–µ–Ω—ã security utils (hash/verify, JWT), CORS, DB session.
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω Alembic, –±–∞–∑–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è users, Makefile migrate, env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ TTL —Ç–æ–∫–µ–Ω–æ–≤.
  - –û–±–Ω–æ–≤–ª—ë–Ω backend Dockerfile –¥–ª—è Alembic; requirements (+jose, passlib, email-validator).
- –í —Ä–∞–±–æ—Ç–µ:
  - –°–ª–µ–¥—É—é—â–∏–µ –º–æ–¥–µ–ª–∏/–º–∏–≥—Ä–∞—Ü–∏–∏ (—á–∞—Ç—ã) –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –°–ø—Ä–∏–Ω—Ç 3.
- –ë–ª–æ–∫–µ—Ä—ã/—Ä–∏—Å–∫–∏:
  - Mailhog —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∫–∞–∫ amd64 –Ω–∞ arm64 (warning), –Ω–æ —Å—Ç–∞—Ä—Ç—É–µ—Ç.
- –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
  - –ü–æ—Å–ª–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ —á–∞—Ç–∞–º (REST).
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
  - PR: -
  - API_CONTRACT: –æ–±–Ω–æ–≤–ª—ë–Ω? –Ω–µ—Ç (auth —Å—Ö–µ–º—É –Ω–µ —É—Ç–æ—á–Ω—è–ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)
  - openapi.json: –æ–±–Ω–æ–≤–ª—ë–Ω? –Ω–µ—Ç
  - Alembic –º–∏–≥—Ä–∞—Ü–∏–∏: 20251203_init_users
  - docker-compose/Makefile: Makefile migrate –æ–±–Ω–æ–≤–ª—ë–Ω; compose –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## 2025-12-03 ‚Äî –°–ø—Ä–∏–Ω—Ç 1 (–∏–Ω—Ñ—Ä–∞)
- –°–¥–µ–ª–∞–Ω–æ:
  - –°–æ–±—Ä–∞–ª –∏ –ø–æ–¥–Ω—è–ª —Å—Ç–µ–∫ docker-compose (backend, celery, db, redis, minio, mailhog, —Ñ—Ä–æ–Ω—Ç-–∑–∞–≥–ª—É—à–∫–∞).
  - –ü—Ä–æ–≤–µ—Ä–∏–ª health: `GET /api/healthz` -> 200 {"status":"ok"}, root -> {"app":"web-messenger","env":"local"}.
  - –°—Ç–µ–∫ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (`docker compose down`).
- –í —Ä–∞–±–æ—Ç–µ:
  - –û–∂–∏–¥–∞—é –∑–∞–¥–∞—á–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞.
- –ë–ª–æ–∫–µ—Ä—ã/—Ä–∏—Å–∫–∏:
  - Mailhog —Ç—è–Ω–µ—Ç—Å—è –∫–∞–∫ amd64 –Ω–∞ arm64 (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ), –Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.
- –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
  - –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –°–ø—Ä–∏–Ω—Ç–∞ 2 (auth) –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:
  - PR: -
  - API_CONTRACT: –æ–±–Ω–æ–≤–ª—ë–Ω? –Ω–µ—Ç
  - openapi.json: –æ–±–Ω–æ–≤–ª—ë–Ω? –Ω–µ—Ç
  - Alembic –º–∏–≥—Ä–∞—Ü–∏–∏: –Ω–µ—Ç
  - docker-compose/Makefile: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –ø–æ–¥—ä—ë–º–∞)
